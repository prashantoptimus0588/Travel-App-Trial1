// See https://developers.google.com/apps-script/guides/properties
// for instructions on how to set the script properties.
const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY
const model = 'gemini-2.5-flash-lite';
const api = 'streamGenerateContent';
const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:${api}?key=${apiKey}`;

function main() {
  const payload = {
    contents: [
      {
        role: 'user',
        parts: [
          {
            text: `Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best time to visit in JSON format. Keep it precise\n`
          },
        ]
      },
      {
        role: 'model',
        parts: [
          {
            text: "```json\n{\n  \"hotels\": [\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109, United States\",\n      \"price\": \"$56\",\n      \"hotelImageUrl\": \"https://example.com/excalibur.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0953,\n        \"longitude\": -115.1753\n      },\n      \"rating\": 7.6,\n      \"description\": \"A budget-friendly themed hotel on the Las Vegas Strip, offering a medieval castle theme and various entertainment options.\"\n    },\n    {\n      \"hotelName\": \"Circus Circus Hotel, Casino & Theme Park\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109, United States\",\n      \"price\": \"$64\",\n      \"hotelImageUrl\": \"https://example.com/circuscircus.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1407,\n        \"longitude\": -115.1545\n      },\n      \"rating\": 6.3,\n      \"description\": \"Known for its circus-themed atmosphere and free circus acts, this hotel offers a unique experience at an affordable price.\"\n    },\n    {\n      \"hotelName\": \"Luxor Hotel and Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119, United States\",\n      \"price\": \"$65\",\n      \"hotelImageUrl\": \"https://example.com/luxor.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0747,\n        \"longitude\": -115.1746\n      },\n      \"rating\": 7.3,\n      \"description\": \"An iconic pyramid-shaped hotel offering Egyptian-themed accommodations and entertainment. It's a more budget-friendly option on the Strip.\"\n    },\n    {\n      \"hotelName\": \"Flamingo Las Vegas Hotel & Casino\",\n      \"hotelAddress\": \"3555 S Las Vegas Blvd, Las Vegas, NV 89109, United States\",\n      \"price\": \"$68\",\n      \"hotelImageUrl\": \"https://example.com/flamingo.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1272,\n        \"longitude\": -115.1672\n      },\n      \"rating\": 7.2,\n      \"description\": \"A classic Las Vegas hotel with a vibrant pink theme, known for its central location and the Flamingo Wildlife Habitat.\"\n    },\n    {\n      \"hotelName\": \"The STRAT Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104, United States\",\n      \"price\": \"$72\",\n      \"hotelImageUrl\": \"https://example.com/strat.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1594,\n        \"longitude\": -115.1551\n      },\n      \"rating\": 7.6,\n      \"description\": \"Features a famous observation tower with thrill rides and stunning city views. Offers a more affordable stay slightly north of the main Strip.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"plan\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"An iconic photo opportunity to mark the start of your Las Vegas adventure.\",\n          \"placeImageUrl\": \"https://example.com/welcome_sign.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0810,\n            \"longitude\": -115.1497\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"30 mins\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"placeDetails\": \"Explore stunning, seasonal floral displays in a breathtaking indoor garden. Changes theme frequently.\",\n          \"placeImageUrl\": \"https://example.com/bellagio_gardens.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1145,\n            \"longitude\": -115.1746\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"1 hour\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Watch the mesmerizing synchronized water, music, and light show. Daytime shows every 30 minutes, nighttime shows every 15 minutes.\",\n          \"placeImageUrl\": \"https://example.com/bellagio_fountains.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1134,\n            \"longitude\": -115.1746\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"30 mins (watching the show)\"\n        },\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Experience the historic heart of Las Vegas with its vibrant light canopy, street performers, and live music. Great for evening atmosphere.\",\n          \"placeImageUrl\": \"https://example.com/fremont_street.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1696,\n            \"longitude\": -115.1570\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"2-3 hours\"\n        }\n      ],\n      \"bestTimeToVisit\": \"Late Afternoon/Evening\"\n    },\n    {\n      \"day\": 2,\n      \"plan\": [\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"An outdoor dining, retail, and entertainment district with a lively atmosphere. Home to the High Roller.\",\n          \"placeImageUrl\": \"https://example.com/linq_promenade.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1220,\n            \"longitude\": -115.1673\n          },\n          \"ticketPricing\": \"Free to walk around\",\n          \"travelTime\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"A 30-minute ride offering panoramic views of the Las Vegas Strip. Best experienced at sunset or night.\",\n          \"placeImageUrl\": \"https://example.com/high_roller.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1216,\n            \"longitude\": -115.1693\n          },\n          \"ticketPricing\": \"$25-35 (approx.)\",\n          \"travelTime\": \"30 mins (ride) + waiting time\"\n        },\n        {\n          \"placeName\": \"Venetian Gondola Ride\",\n          \"placeDetails\": \"Enjoy a romantic gondola ride through the Venetian's indoor or outdoor canals, serenaded by a gondolier.\",\n          \"placeImageUrl\": \"https://example.com/venetian_gondola.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1216,\n            \"longitude\": -115.1777\n          },\n          \"ticketPricing\": \"$29 per person for shared ride\",\n          \"travelTime\": \"20 mins\"\n        },\n        {\n          \"placeName\": \"Explore the Strip\",\n          \"placeDetails\": \"Walk along the Las Vegas Strip, explore the themed hotels like Paris Las Vegas (Eiffel Tower), New York-New York, and more. Many casinos offer free attractions.\",\n          \"placeImageUrl\": \"https://example.com/las_vegas_strip.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1730\n          },\n          \"ticketPricing\": \"Free (to walk and enter casinos)\",\n          \"travelTime\": \"3-4 hours\"\n        }\n      ],\n      \"bestTimeToVisit\": \"Afternoon/Evening\"\n    },\n    {\n      \"day\": 3,\n      \"plan\": [\n        {\n          \"placeName\": \"The Mirage Volcano\",\n          \"placeDetails\": \"Witness the spectacular free outdoor volcano eruption show with music and pyrotechnics. Shows hourly from 8 PM to 11 PM.\",\n          \"placeImageUrl\": \"https://example.com/mirage_volcano.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1315,\n            \"longitude\": -115.1648\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"30 mins (waiting and watching)\"\n        },\n        {\n          \"placeName\": \"Flamingo Wildlife Habitat\",\n          \"placeDetails\": \"A free, serene 4-acre garden within the Flamingo hotel, featuring flamingos, ducks, fish, and turtles.\",\n          \"placeImageUrl\": \"https://example.com/flamingo_habitat.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1272,\n            \"longitude\": -115.1672\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"1 hour\"\n        },\n        {\n          \"placeName\": \"Pinball Hall of Fame\",\n          \"placeDetails\": \"A fun and nostalgic stop with over 350 vintage pinball machines and classic arcade games. Most games cost 25-50 cents to play.\",\n          \"placeImageUrl\": \"https://example.com/pinball_hof.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0961,\n            \"longitude\": -115.1746\n          },\n          \"ticketPricing\": \"Free admission, pay per game (approx. $0.50)\",\n          \"travelTime\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"Arts District (Downtown Las Vegas)\",\n          \"placeDetails\": \"Explore vibrant street art, unique galleries, and independent shops. A great place to see a different side of Vegas.\",\n          \"placeImageUrl\": \"https://example.com/arts_district.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1578,\n            \"longitude\": -115.1467\n          },\n          \"ticketPricing\": \"Free to explore\",\n          \"travelTime\": \"2-3 hours\"\n        }\n      ],\n      \"bestTimeToVisit\": \"Late Afternoon/Evening\"\n    }\n  ]\n}\n```\nThe best way to experience Las Vegas on a budget for a couple for 3 days involves strategic hotel choices and a mix of free and low-cost attractions. Here’s a plan tailored for affordability and enjoyment:\n\n## Budget-Friendly Hotels in Las Vegas\n\nHere are some hotel options that offer good value for money:\n\n*   **Excalibur Hotel & Casino:** A budget-friendly themed hotel on the Las Vegas Strip, offering a medieval castle theme and various entertainment options. (Price: ~$56/night, Rating: 7.6/10)\n*   **Circus Circus Hotel, Casino & Theme Park:** Known for its circus-themed atmosphere and free circus acts, this hotel offers a unique experience at an affordable price. (Price: ~$64/night, Rating: 6.3/10)\n*   **Luxor Hotel and Casino:** An iconic pyramid-shaped hotel offering Egyptian-themed accommodations and entertainment. It's a more budget-friendly option on the Strip. (Price: ~$65/night, Rating: 7.3/10)\n*   **Flamingo Las Vegas Hotel & Casino:** A classic Las Vegas hotel with a vibrant pink theme, known for its central location and the Flamingo Wildlife Habitat. (Price: ~$68/night, Rating: 7.2/10)\n*   **The STRAT Hotel, Casino & Tower:** Features a famous observation tower with thrill rides and stunning city views. Offers a more affordable stay slightly north of the main Strip. (Price: ~$72/night, Rating: 7.6/10)\n\n## 3-Day Budget Itinerary for Couples\n\nThis itinerary focuses on iconic free attractions and affordable experiences:\n\n### Day 1: Iconic Sights and Downtown Vibes\n\n*   **Morning (10:00 AM): Welcome to Fabulous Las Vegas Sign**\n    *   **Details:** An iconic photo opportunity to mark the start of your Las Vegas adventure.\n    *   **Location:** 5100 S Las Vegas Blvd, Las Vegas, NV 89119\n    *   **Coordinates:** 36.0810° N, 115.1497° W\n    *   **Price:** Free\n    *   **Travel Time:** 30 minutes from most Strip hotels.\n*   **Afternoon (1:00 PM): Bellagio Conservatory & Botanical Gardens**\n    *   **Details:** Explore stunning, seasonal floral displays in a breathtaking indoor garden. The themes change seasonally, offering a fresh experience each visit.\n    *   **Location:** 1 Bellagio Dr, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1145° N, 115.1746° W\n    *   **Price:** Free\n    *   **Travel Time:** On the Strip, easily accessible. Allow 1 hour to explore.\n*   **Late Afternoon (3:00 PM): Bellagio Fountains**\n    *   **Details:** Watch the mesmerizing synchronized water, music, and light show. Daytime shows are every 30 minutes, and nighttime shows occur every 15 minutes.\n    *   **Location:** 3600 S Las Vegas Blvd, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1134° N, 115.1746° W\n    *   **Price:** Free\n    *   **Travel Time:** Adjacent to the Conservatory. Allow 30 minutes for viewing.\n*   **Evening (7:00 PM onwards): Fremont Street Experience**\n    *   **Details:** Experience the historic heart of Las Vegas with its vibrant light canopy, street performers, and live music. It offers a more traditional Vegas feel.\n    *   **Location:** Fremont Street, Las Vegas, NV 89101\n    *   **Coordinates:** 36.1696° N, 115.1570° W\n    *   **Price:** Free\n    *   **Travel Time:** 15-20 minutes from the Strip. Spend 2-3 hours exploring.\n*   **Best Time to Visit:** Late Afternoon/Evening for Fremont Street's light shows and vibrant atmosphere.\n\n### Day 2: High Roller Views and Venetian Charm\n\n*   **Afternoon (2:00 PM): The LINQ Promenade**\n    *   **Details:** An outdoor dining, retail, and entertainment district with a lively atmosphere. It's a great place for people-watching and enjoying the Strip's energy.\n    *   **Location:** 3545 S Las Vegas Blvd, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1220° N, 115.1673° W\n    *   **Price:** Free to walk around.\n    *   **Travel Time:** Easily accessible on the Strip. Allow 1-2 hours.\n*   **Late Afternoon (4:00 PM): High Roller Observation Wheel**\n    *   **Details:** A 30-minute ride offering panoramic views of the Las Vegas Strip. Best experienced at sunset or night for dazzling city lights.\n    *   **Location:** 3545 S Las Vegas Blvd, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1216° N, 115.1693° W\n    *   **Price:** Approximately $25-35 per person. Book in advance for potential discounts.\n    *   **Travel Time:** Located at The LINQ Promenade. Allow 1 hour including wait time.\n*   **Evening (7:00 PM): Venetian Gondola Ride**\n    *   **Details:** Enjoy a romantic gondola ride through the Venetian's canals, serenaded by a gondolier. It's a classic romantic Vegas experience.\n    *   **Location:** 3355 S Las Vegas Blvd, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1216° N, 115.1777° W\n    *   **Price:** Approximately $29 per person for a shared ride.\n    *   **Travel Time:** Within The Venetian resort. Allow 20 minutes for the ride.\n*   **Late Evening (9:00 PM): Explore the Strip Hotels**\n    *   **Details:** Walk along the Las Vegas Strip, exploring the unique themes and free attractions within hotels like Paris Las Vegas (Eiffel Tower viewing), New York-New York, and more.\n    *   **Location:** Along Las Vegas Boulevard South\n    *   **Coordinates:** Centered around 36.1146° N, 115.1730° W\n    *   **Price:** Free (to walk and enter casinos).\n    *   **Travel Time:** Flexible, spend as much time as you like.\n*   **Best Time to Visit:** Afternoon/Evening to enjoy the High Roller at sunset and the illuminated Strip.\n\n### Day 3: Unique Habitats and Artistic Exploration\n\n*   **Morning (10:00 AM): Flamingo Wildlife Habitat**\n    *   **Details:** A free, serene 4-acre garden within the Flamingo hotel, featuring flamingos, ducks, fish, and turtles. A peaceful escape from the casino buzz.\n    *   **Location:** 3555 S Las Vegas Blvd, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1272° N, 115.1672° W\n    *   **Price:** Free\n    *   **Travel Time:** On the Strip. Allow 1 hour.\n*   **Lunch (12:30 PM): Budget-friendly lunch on the Strip**\n    *   **Details:** Consider food courts within hotels (e.g., Miracle Mile Shops at Planet Hollywood) or casual eateries like Earl of Sandwich for affordable meals.\n    *   **Price:** $10-20 per person.\n*   **Afternoon (2:00 PM): Pinball Hall of Fame**\n    *   **Details:** A fun and nostalgic stop with over 350 vintage pinball machines and classic arcade games. Most games cost 25-50 cents to play.\n    *   **Location:** 1660 E Tropicana Ave, Las Vegas, NV 89119\n    *   **Coordinates:** 36.1038° N, 115.1265° W\n    *   **Price:** Free admission, pay per game (approx. $0.50).\n    *   **Travel Time:** 10-15 minutes from the Strip. Allow 1-2 hours.\n*   **Late Afternoon (4:00 PM): Arts District (Downtown Las Vegas)**\n    *   **Details:** Explore vibrant street art, unique galleries, and independent shops. A great place to see a different side of Vegas and find local crafts.\n    *   **Location:** Between S Commerce St and S 4th St, south of the Fremont Street Experience.\n    *   **Coordinates:** Centered around 36.1578° N, 115.1467° W\n    *   **Price:** Free to explore.\n    *   **Travel Time:** 15-20 minutes from the Strip. Allow 2-3 hours.\n*   **Evening (7:00 PM): The Mirage Volcano**\n    *   **Details:** Witness the spectacular free outdoor volcano eruption show with music and pyrotechnics. Shows are typically hourly from 8 PM to 11 PM. Check the schedule.\n    *   **Location:** 3400 S Las Vegas Blvd, Las Vegas, NV 89109\n    *   **Coordinates:** 36.1315° N, 115.1648° W\n    *   **Price:** Free\n    *   **Travel Time:** On the Strip. Allow 30 minutes for viewing.\n*   **Best Time to Visit:** Afternoon for the Arts District and the Mirage Volcano in the evening.\n\n**Budget Tips for Las Vegas:**\n\n*   **Stay Midweek:** Hotel prices are significantly lower from Monday to Thursday.\n*   **Look for Free Attractions:** Las Vegas offers numerous free shows and sights, like the Bellagio Fountains, Conservatory, Flamingo Wildlife Habitat, and Fremont Street Experience.\n*   **Utilize Happy Hour:** Many restaurants and bars offer discounted food and drinks during happy hour.\n*   **Food Courts and Buffets:** Opt for food courts in hotels or consider buffets for more affordable and plentiful dining options.\n*   **Transportation:** Utilize the Deuce on the Strip bus for cost-effective travel along the boulevard.\n*   **Avoid Resort Fees:** Some hotels do not charge resort fees, which can add up significantly.\n*   **Book in Advance:** For attractions like the High Roller, booking tickets in advance can sometimes secure better prices."
          },
        ]
      },
      {
        role: 'user',
        parts: [
          {
            text: `INSERT_INPUT_HERE`
          },
        ]
      },
    ],
    generationConfig: {
      thinkingConfig: {
        thinkingBudget: 0,
      },
    },
    tools: [
      {
        googleSearch: {}
      },
    ],
  };

  const options = {
    method: 'POST',
    contentType: 'application/json',
    muteHttpExceptions: true,
    payload: JSON.stringify(payload),
  };

  const response = UrlFetchApp.fetch(url, options);
  const chunks = JSON.parse(response.getContentText());

  for (const chunk of chunks) {
    console.log(chunk.candidates[0].content.parts[0].text);
  }
}


export const AI_PROMPT = "Generate Travel Plan for Location: {location} for {totalDays} Days for {travelers} with a {budget} budget. Give me a list of hotel options with HotelName, Hotel address, Price, hotel image URL, geo coordinates, rating, descriptions. Also suggest an itinerary with placeName, place details, place image URL, geo coordinates, ticket pricing, time to travel to each location, and best time to visit — all in JSON format.";
// this is not working so i added a finsal prompt with `${}` in index.jsx
